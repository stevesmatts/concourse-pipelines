---
resource_types:
- name: slack-notification
  type: docker-image
  source:
    repository: cfcommunity/slack-notification-resource
    tag: latest

resources:
- name: froala-release
  type: github-release
  source:
    owner: froala
    repository: wysiwyg-editor
    access_token: ((github_access_token))
- name: fullcalendar-release
  type: github-release
  source:
    owner: fullcalendar
    repository: fullcalendar
    access_token: ((github_access_token))
- name: primeng-release
  type: github-release
  source:
    owner: primefaces
    repository: primeng
    access_token: ((github_access_token))
- name: notify
  type: slack-notification
  source:
    url: ((slack_hook))
    disable: ((slack_disabled))

jobs:
- name: fetch-froala
  public: true
  build_logs_to_retain: 1
  plan:
  - do:
    - get: froala-release
      trigger: true
    on_failure:
      put: notify
      params:
        icon_emoji: ":skull_and_crossbones:"
        text: Failed to process new Froala release
    on_success:
      put: notify
      params:
        icon_emoji: ":thumbsup:"
        text: Successfully processed new Froala release
- name: fetch-fullcalendar
  public: true
  build_logs_to_retain: 1
  plan:
  - do:
    - get: fullcalendar-release
      trigger: true
    on_failure:
      put: notify
      params:
        icon_emoji: ":skull_and_crossbones:"
        text: Failed to process new FullCalendar release
    on_success:
      put: notify
      params:
        icon_emoji: ":thumbsup:"
        text: Successfully processed new FullCalendar release
- name: fetch-primeng
  public: true
  build_logs_to_retain: 1
  plan:
  - do:
    - get: primeng-release
      trigger: true
    on_failure:
      put: notify
      params:
        icon_emoji: ":skull_and_crossbones:"
        text: Failed to process new PrimeNG release
    on_success:
      put: notify
      params:
        icon_emoji: ":thumbsup:"
        text: Successfully processed new PrimeNG release
